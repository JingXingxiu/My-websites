<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>我的书库</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2 id="bookCount">正在加载书库...</h2>
        <div id="bookList"></div>
        <a href="index.html">← 返回查价</a>
    </div>

    <script>
        function updateBookCount() {
            const library = JSON.parse(localStorage.getItem('bookLibrary') || '[]');
            const countElement = document.getElementById('bookCount');
            countElement.innerHTML = `已保存书籍（${library.length}本）`;
        }

        function loadLibrary() {
            const library = JSON.parse(localStorage.getItem('bookLibrary') || '[]');
            const listDiv = document.getElementById('bookList');
            
            listDiv.innerHTML = library.map(book => `
                <div class="book-card">
                    <div class="book-header">
                        <span>ISBN: ${book.isbn}</span>
                        <span>添加时间: ${book.addedAt}</span>
                    </div>
                    <div class="price-list">
                        ${book.prices.map(p => `
                            <div class="price-item">
                                <span>${p.platform}</span>
                                <span>¥${p.price}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            updateBookCount();
        }

        // 页面加载时自动执行
        window.onload = loadLibrary;
    </script>
</body>
</html>